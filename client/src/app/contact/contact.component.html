<div class="container">
  <h2>Contacts</h2>

  <hr />

  <table class="table">
    <thead>
      <tr>
        <th>Id</th>
        <th>Name</th>
        <th>Phone Number</th>
        <th>
          <button
            class="btn btn-primary mx-1"
            title="Add New contact"
            (click)="openModal(template, undefined)"
          >
            <i class="bi bi-plus"></i>
          </button>
        </th>
      </tr>
    </thead>

    <tbody>
      <tr *ngFor="let contact of contacts; let i = index">
        <td>{{ i + 1 }}.</td>
        <td>{{ contact.name }}</td>
        <td>{{ contact.phoneNumber }}</td>

        <td>
          <div>
            <button
              class="btn btn-primary mx-1"
              title="Edit Contact"
              (click)="openModal(template, contact.id)"
            >
              <i class="bi bi-pencil"></i>
            </button>

            <button
              class="btn btn-danger mx-1"
              title="Delete Contact"
              (click)="deleteContact(contact.id)"
            >
              <i class="bi bi-trash"></i>
            </button>
          </div>
        </td>
      </tr>
    </tbody>
  </table>
</div>

<ng-template #template>
  <app-modal
    [title]="form.value.id != null ? 'Edit Contact' : 'Add New Contact'"
    [formGroup]="form"
    (formSubmit)="populateContact()"
    (hideModal)="modalRef?.hide()"
  >
    <input
      type="text"
      title="Name"
      placeholder="Name"
      class="form-control my-2"
      formControlName="name"
    />

    <input
      type="text"
      title="Phone Number"
      placeholder="Phone Number"
      class="form-control my-2"
      formControlName="phoneNumber"
    />
  </app-modal>
</ng-template>
